<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø°ÙƒØ±ØªÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ğŸŒ¸</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Pacifico&display=swap" rel="stylesheet">

<style>
/* -------------------- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… -------------------- */
* { box-sizing: border-box; }
body {
  font-family: 'Roboto', sans-serif;
  margin: 0;
  padding: 0;
  background: #ffe4e1;
  color: #333;
  display: flex;
  height: 100vh;
  overflow: hidden;
  transition: all 0.3s;
}
body.dark { background: #121212; color: #f0f0f0; }

/* -------------------- Sidebar -------------------- */
#sidebar {
  width: 220px;
  background: #fff0f5;
  border-right: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  padding: 10px;
  transition: all 0.3s;
}
body.dark #sidebar { background: #1f1f1f; }

/* -------------------- Sidebar items -------------------- */
.sidebar-item {
  padding: 10px;
  margin: 5px 0;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s;
}
.sidebar-item.active { background: #880e4f; color: #fff; }
.sidebar-item:hover { background: #f8c8dc; }

/* -------------------- Main Content -------------------- */
#main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 20px;
}

/* -------------------- Note Cards -------------------- */
.note-card {
  border-radius: 12px;
  background: rgba(255,255,255,0.7);
  padding: 15px;
  margin-bottom: 15px;
  min-height: 100px;
  transition: 0.3s;
  cursor: text;
}
body.dark .note-card { background: rgba(50,50,50,0.7); }

/* -------------------- Editable Titles -------------------- */
.note-card h3 { margin-top:0; }
.text-editable { border:none; outline:none; width:100%; font-size:16px; }

/* -------------------- Toolbar -------------------- */
#toolbar {
  display: flex;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
#toolbar button, select, input[type="color"], input[type="file"] {
  margin: 5px;
  padding: 6px 12px;
  border-radius: 5px;
  border: 1px solid #ccc;
  cursor: pointer;
  font-size: 14px;
  transition:0.3s;
}
#toolbar button:hover, select:hover, input:hover { transform: scale(1.05); }

/* -------------------- Images & Stickers -------------------- */
#imagesContainer, #stickersContainer { display:flex; flex-wrap:wrap; margin-top:10px; }
img.user-image, img.sticker { width:80px; margin:5px; border-radius:10px; cursor:pointer; }
</style>
</head>
<body>

<!-- -------------------- Sidebar -------------------- -->
<div id="sidebar">
  <h2>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h2>
  <div id="notesList"></div>
  <button onclick="addNote()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
</div>

<!-- -------------------- Main Content -------------------- -->
<div id="main">
  <!-- Toolbar -->
  <div id="toolbar">
    <button onclick="toggleDark()">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
    <button onclick="toggleDesign()">ØªØºÙŠÙŠØ± Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
    <select id="fontSelect" onchange="changeFont()">
      <option value="thin">Ø±Ù‚ÙŠÙ‚</option>
      <option value="cute">ÙƒÙŠÙˆØª</option>
      <option value="bold">Ø«Ù‚ÙŠÙ„</option>
    </select>
    <input type="color" id="textColor" onchange="changeColor()" value="#333333">
    <input type="file" id="imageUpload" accept="image/*" multiple>
    <button onclick="exportPDF()">ØªØµØ¯ÙŠØ± PDF</button>
  </div>

  <!-- Stickers -->
  <h3>Ø§Ù„Ù…Ù„ØµÙ‚Ø§Øª:</h3>
  <div id="stickersContainer">
    <img src="https://i.postimg.cc/Qd5Xn7Rn/sticker1.png" class="sticker" draggable="true">
    <img src="https://i.postimg.cc/3x1Fk6Vm/sticker2.png" class="sticker" draggable="true">
  </div>

  <!-- Notes Area -->
  <div id="notesArea"></div>

  <div id="imagesContainer"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// -------------------- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª --------------------
let isCute = true;
let notes = [];

// -------------------- Ø§Ù„ÙˆØ¸Ø§Ø¦Ù --------------------
// Ø¥Ø¶Ø§ÙØ© Ù…Ø°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©
function addNote(){
  const id = Date.now();
  const note = {id:id, title:'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø°ÙƒØ±Ø©', content:'Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ âœï¸'};
  notes.push(note);
  renderSidebar();
  renderNotesArea();
  saveNotes();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙŠ Sidebar
function renderSidebar(){
  const list = document.getElementById('notesList');
  list.innerHTML='';
  notes.forEach((n,i)=>{
    const div = document.createElement('div');
    div.className='sidebar-item'+(i===0?' active':'');
    div.innerText=n.title;
    div.onclick=()=>{ activateNote(i); };
    list.appendChild(div);
  });
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙŠ Main Area
function renderNotesArea(){
  const area = document.getElementById('notesArea');
  area.innerHTML='';
  notes.forEach((n,i)=>{
    const div = document.createElement('div');
    div.className='note-card';
    div.setAttribute('data-index',i);
    div.innerHTML = `<h3 contenteditable="true" oninput="saveNotes()">${n.title}</h3>
                     <div contenteditable="true" class="text-editable" oninput="saveNotes()">${n.content}</div>`;
    area.appendChild(div);
  });
}

// ØªÙØ¹ÙŠÙ„ Ù…Ø°ÙƒØ±Ø© Ù…Ø­Ø¯Ø¯Ø©
function activateNote(index){
  const sidebarItems = document.querySelectorAll('.sidebar-item');
  sidebarItems.forEach((s,i)=>s.classList.toggle('active', i===index));
  const notesCards = document.querySelectorAll('.note-card');
  notesCards.forEach((c,i)=>c.style.display=(i===index?'block':'none'));
}

// -------------------- Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ --------------------
function toggleDark(){ document.body.classList.toggle('dark'); }

// -------------------- ØªØºÙŠÙŠØ± Ø§Ù„ØªØµÙ…ÙŠÙ… --------------------
function toggleDesign(){
  const stickers = document.querySelectorAll('.sticker');
  if(isCute){
    document.body.style.background='#f5f5f5';
    document.body.style.color='#333';
    stickers.forEach(s=>s.style.display='none');
  } else {
    document.body.style.background='#ffe4e1';
    document.body.style.color='#880e4f';
    stickers.forEach(s=>s.style.display='inline-block');
  }
  isCute=!isCute;
}

// -------------------- ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ø· --------------------
function changeFont(){
  const font = document.getElementById('fontSelect').value;
  document.querySelectorAll('.text-editable, .note-card h3').forEach(el=>{
    el.classList.remove('thin','cute','bold');
    if(font==='thin') el.classList.add('thin');
    else if(font==='cute') el.classList.add('cute');
    else if(font==='bold') el.classList.add('bold');
  });
}

// -------------------- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†Øµ --------------------
function changeColor(){
  const color = document.getElementById('textColor').value;
  document.querySelectorAll('.text-editable, .note-card h3').forEach(el=>el.style.color=color);
}

// -------------------- Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± --------------------
const imageUpload = document.getElementById('imageUpload');
const imagesContainer = document.getElementById('imagesContainer');
imageUpload.addEventListener('change',function(){
  for(const file of this.files){
    const reader = new FileReader();
    reader.onload = function(e){
      const img=document.createElement('img');
      img.src=e.target.result;
      img.className='user-image';
      imagesContainer.appendChild(img);
    }
    reader.readAsDataURL(file);
  }
});

// -------------------- Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ --------------------
function saveNotes(){
  const notesArea = document.getElementById('notesArea').children;
  notes.forEach((n,i)=>{
    const div = notesArea[i];
    n.title = div.querySelector('h3').innerText;
    n.content = div.querySelector('.text-editable').innerText;
  });
  localStorage.setItem('notesData',JSON.stringify(notes));
}

function loadNotes(){
  const saved = JSON.parse(localStorage.getItem('notesData')||'[]');
  if(saved.length>0) notes=saved;
  renderSidebar();
  renderNotesArea();
  activateNote(0);
}
window.addEventListener('load',loadNotes);

// -------------------- ØªØµØ¯ÙŠØ± PDF --------------------
function exportPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  notes.forEach((n,i)=>{
    doc.text(`Ø§Ù„Ù…Ø°ÙƒØ±Ø©: ${n.title}`,10,10+i*20);
    doc.text(n.content,10,15+i*20);
  });
  doc.save('Ù…Ø°ÙƒØ±ØªÙŠ.pdf');
}

// -------------------- Drag & Drop Ù„Ù„Ù…Ù„ØµÙ‚Ø§Øª --------------------
const stickers = document.querySelectorAll('.sticker');
stickers.forEach(sticker=>{
  sticker.addEventListener('dragstart',e=>{
    e.dataTransfer.setData('text/plain', sticker.src);
  });
});
imagesContainer.addEventListener('dragover',e=>e.preventDefault());
imagesContainer.addEventListener('drop',e=>{
  e.preventDefault();
  const src = e.dataTransfer.getData('text/plain');
  const img = document.createElement('img');
  img.src = src; img.className='user-image';
  imagesContainer.appendChild(img);
});

</script>
</body>
</html>
